<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.RadioButton?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.ToggleGroup?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<ScrollPane xmlns="http://javafx.com/javafx/17" 
            xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.shopjoy.controller.ReportsViewController"
            fitToWidth="true">
            
    <content>
        <VBox spacing="25" styleClass="content-view" stylesheets="@../../css/styles.css">
            <padding>
                <Insets top="30" right="30" bottom="30" left="30"/>
            </padding>
            
            <fx:define>
                <ToggleGroup fx:id="reportType"/>
            </fx:define>

            <!-- Header -->
            <VBox spacing="10">
                <Label text="Reports &amp; Analytics" styleClass="page-title"/>
                <Separator/>
            </VBox>

            <!-- Report Selection Section -->
            <VBox spacing="15">
                <Label text="Select Report Type" styleClass="section-title"/>
                <VBox spacing="15" style="-fx-padding: 10;">
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <RadioButton fx:id="salesReportRadio" text="Sales Report" toggleGroup="$reportType" selected="true"/>
                        <Label text="(Revenue and orders over time)" style="-fx-text-fill: #666666; -fx-font-style: italic;"/>
                    </HBox>
                    
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <RadioButton fx:id="inventoryReportRadio" text="Inventory Report" toggleGroup="$reportType"/>
                        <Label text="(Stock levels and low stock items)" style="-fx-text-fill: #666666; -fx-font-style: italic;"/>
                    </HBox>
                    
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <RadioButton fx:id="customerReportRadio" text="Customer Report" toggleGroup="$reportType"/>
                        <Label text="(Customer statistics and top customers)" style="-fx-text-fill: #666666; -fx-font-style: italic;"/>
                    </HBox>
                    
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <RadioButton fx:id="productReportRadio" text="Product Report" toggleGroup="$reportType"/>
                        <Label text="(Top selling products and categories)" style="-fx-text-fill: #666666; -fx-font-style: italic;"/>
                    </HBox>
                </VBox>
            </VBox>

            <!-- Date Range Section -->
            <VBox spacing="15">
                <Separator/>
                <Label text="Date Range" styleClass="section-title"/>
                <HBox spacing="15" alignment="CENTER_LEFT" style="-fx-padding: 10;">
                    <Label text="From:"/>
                    <DatePicker fx:id="fromDatePicker" prefWidth="150"/>
                    <Label text="To:"/>
                    <DatePicker fx:id="toDatePicker" prefWidth="150"/>
                    <Button fx:id="generateReportButton" text="ðŸ“Š Generate Report" onAction="#handleGenerateReport" styleClass="primary-button"/>
                </HBox>
            </VBox>

            <!-- Results Section -->
            <VBox spacing="15" VBox.vgrow="ALWAYS">
                <Separator/>
                <Label text="Report Results" styleClass="section-title"/>
                <TextArea fx:id="reportResultsArea" editable="false" prefHeight="400" wrapText="true" styleClass="report-text-area"/>
            </VBox>

            <!-- Export Section -->
            <HBox spacing="15" style="-fx-padding: 10;">
                <Button fx:id="exportPdfButton" text="ðŸ“„ Export PDF" onAction="#handleExportPdf" styleClass="secondary-button"/>
                <Button fx:id="exportCsvButton" text="ðŸ“Š Export CSV" onAction="#handleExportCsv" styleClass="secondary-button"/>
                <Button fx:id="printButton" text="ðŸ–¨ï¸ Print" onAction="#handlePrint" styleClass="secondary-button"/>
            </HBox>

        </VBox>
    </content>
</ScrollPane>
